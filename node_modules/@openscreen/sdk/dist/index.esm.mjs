import{promises as t}from"fs";import e from"moment";import{CognitoUser as s,CognitoUserPool as r,AuthenticationDetails as n,CognitoUserAttribute as i}from"amazon-cognito-identity-js";import a from"axios";class o extends s{async authenticateUser(t){return new Promise((e,s)=>{super.authenticateUser(t,{onSuccess:t=>e({session:t}),onFailure:t=>s(t),mfaRequired:(t,s)=>e({challengeName:t,challengeParameters:s}),selectMFAType:(t,s)=>e({challengeName:t,challengeParameters:s}),mfaSetup:(t,s)=>e({challengeName:t,challengeParameters:s}),totpRequired:(t,s)=>e({challengeName:t,challengeParameters:s}),customChallenge:t=>e({challengeParameters:t})})})}async getSession(){return new Promise((t,e)=>{super.getSession((s,r)=>s?e(s):t(r))})}}class h extends r{getStorage(){return this.storage}getClientId(){return this.clientId}async signUp(t,e,s,r){return new Promise((n,i)=>{super.signUp(t,e,s,r,(t,e)=>t?i(t):n(e))})}}class c{constructor(t,e,s){this.userPool=void 0,this.userPool=new h({UserPoolId:t,ClientId:e,Storage:s})}getCognitoUserPool(){return this.userPool}getStorage(){return this.userPool.getStorage()}getUser(t){if(t){const e=this.userPool.getStorage().getItem(`keyToUsername.${Buffer.from(t).toString("base64")}`);return e?new o({Username:e,Pool:this.userPool,Storage:this.userPool.getStorage()}):null}const e=this.userPool.getStorage().getItem(`CognitoIdentityServiceProvider.${this.userPool.getClientId()}.LastAuthUser`);return e?new o({Username:e,Pool:this.userPool,Storage:this.userPool.getStorage()}):null}async authenticate(t,e){const s=new o({Username:t,Pool:this.userPool,Storage:this.userPool.getStorage()}),r=new n({Username:t,Password:e});return s.authenticateUser(r).then(e=>{if(e.session){const e=s.getUsername();return this.userPool.getStorage().setItem(`keyToUsername.${Buffer.from(t).toString("base64")}`,e),s}return null})}async signUp(t,e,s){const r=[];return r.push(new i({Name:"given_name",Value:s.givenName})),r.push(new i({Name:"middle_name",Value:s.middleName})),r.push(new i({Name:"family_name",Value:s.familyName})),r.push(new i({Name:"phone_number",Value:s.phoneNumber})),r.push(new i({Name:"email",Value:t})),this.userPool.signUp(t,e,r,[])}}function u(){return u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},u.apply(this,arguments)}class d{constructor(t){this.session=void 0,this.axios=void 0,this.session=t,this.axios=a.create({timeout:1e4,responseType:"json",maxContentLength:5e4,maxBodyLength:5e4,maxRedirects:1,decompress:!0})}async makeURL(t){return function(t,...e){const s=[t.replace(/\/+$/,"")];return e.forEach(t=>{t&&""!==t&&s.push(t.replace(/^\/+/,""))}),s.join("/")}((await this.session.getCloudConfig()).endpoint,t)}async getAuthorization(){const t=await this.session.getActiveUser(),e=await t.getSession();if(!e)throw Error("Openscreen No session available");return`Bearer ${await e.getAccessToken().getJwtToken()}`}async post(t,e={},s={},r={}){const n=await this.makeURL(t);process.env.OS_DEBUG&&(console.debug(`POST ${n}`),console.debug(JSON.stringify(s,null,2)));const i=await this.axios.post(n,s,u({headers:{Authorization:await this.getAuthorization()},params:e},r));return process.env.OS_DEBUG&&console.debug("RESPONSE",JSON.stringify(i.data,null,2)),i.data}async postBatch(t,e={},s,r={}){const n=await this.makeURL(t);process.env.OS_DEBUG&&(console.debug(`POST ${n}`),console.debug(JSON.stringify(s,null,2)));const i=await this.axios.post(n,s,u({headers:{Authorization:await this.getAuthorization()},params:e},r));return process.env.OS_DEBUG&&console.debug("RESPONSE",JSON.stringify(i.data,null,2)),i.data}async get(t,e={},s={}){const r=await this.makeURL(t);process.env.OS_DEBUG&&console.debug(`GET ${r}`);const n=await this.axios.get(r,u({headers:{Authorization:await this.getAuthorization()},params:e},s));return process.env.OS_DEBUG&&console.debug("RESPONSE",JSON.stringify(n.data,null,2)),n.data}async getList(t,e={},s={}){const r=await this.makeURL(t);process.env.OS_DEBUG&&console.debug(`GET ${r}`);const n=await this.axios.get(r,u({headers:{Authorization:await this.getAuthorization()},params:e},s));return process.env.OS_DEBUG&&console.debug("RESPONSE",JSON.stringify(n.data,null,2)),n.data}async patch(t,e={},s={},r={}){const n=await this.makeURL(t);process.env.OS_DEBUG&&(console.debug(`PATCH ${n}`),console.debug(JSON.stringify(s,null,2)));const i=await a.patch(n,s,u({headers:{Authorization:await this.getAuthorization()},params:e,data:s},r));return process.env.OS_DEBUG&&console.debug("RESPONSE",JSON.stringify(i.data,null,2)),i.data}async delete(t,e={},s={}){const r=await this.makeURL(t);return process.env.OS_DEBUG&&console.debug(`DELETE ${r}`),await a.delete(await this.makeURL(t),u({headers:{Authorization:await this.getAuthorization()},params:e},s)),!0}}class g{constructor(t,e,s,r,n){if(this.session=void 0,this.request=void 0,this.id=void 0,this.path=void 0,this.sdkPath=void 0,this.session=t,this.request=t.getRequest(r),this.id=n,this.path=n?`${e}/${r}/${n}`:`${e}/${r}`,n){const t=(i=r).endsWith("s")?i.substring(0,i.length-1):i;this.sdkPath=`${s}.${t}(${t}Id)`}else this.sdkPath=`${s}.${r}()`;var i}getSession(){return this.session}getPath(){return this.path}getSdkPath(){return this.sdkPath}describeSdkEndpoints(t){t.push(this.getSdkPath())}}class p extends g{constructor(t){super(t.getSession(),t.getPath(),t.getSdkPath(),"projects")}async create(t){return this.request.post(this.getPath(),{},t)}async get(){return this.request.getList(this.getPath())}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.create(project: IProject)`),t.push(`${this.getSdkPath()}.get(): IProject`)}}class S extends g{constructor(t,e){super(t.getSession(),t.getPath(),t.getSdkPath(),"projects",e)}async moveProjectToAccount(){return await this.request.post(this.getPath(),{},{}),!0}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.moveProjectToAccount()`)}}class P extends g{constructor(t){super(t.getSession(),t.getPath(),t.getSdkPath(),"apikeys")}async create(t){return this.request.post(this.getPath(),{},t)}async get(){return this.request.getList(this.getPath())}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.create(apiKey: IApiKey)`),t.push(`${this.getSdkPath()}.get(): IApiKey`)}}class l extends g{constructor(t){super(t.getSession(),t.getPath(),t.getSdkPath(),"invitations")}async create(t){return this.request.post(this.getPath(),{},t)}async get(){return this.request.getList(this.getPath())}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.create(invitation: IAccountInvitation)`),t.push(`${this.getSdkPath()}.get(): IAccountInvitation`)}}class k extends g{constructor(t){super(t.getSession(),t.getPath(),t.getSdkPath(),"users")}async get(){return this.request.getList(this.getPath())}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.get(): IUser`)}}class E extends g{constructor(t,e){super(t.getSession(),t.getPath(),t.getSdkPath(),"users",e)}async delete(){return this.request.delete(this.getPath())}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.delete()`)}}class y extends g{constructor(t,e,s,r){super(t,e,s,"accounts",r)}async get(){return this.request.get(this.getPath())}async update(t){return this.request.patch(this.getPath(),{},t)}async delete(){return this.request.delete(this.getPath())}apiKeys(){return new P(this)}invitations(){return new l(this)}projects(){return new p(this)}project(t){return new S(this,t)}users(){return new k(this)}user(t){return new E(this,t)}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.get(): IAccount`),t.push(`${this.getSdkPath()}.update(properties: IAccount): Object`),t.push(`${this.getSdkPath()}.delete()`),this.apiKeys().describeSdkEndpoints(t),this.invitations().describeSdkEndpoints(t),this.projects().describeSdkEndpoints(t),this.project("{projectId}").describeSdkEndpoints(t),this.users().describeSdkEndpoints(t),this.user("{userId}").describeSdkEndpoints(t)}}class m extends g{constructor(t,e,s,r){super(t,e,s,"apikeys",r)}async get(){return this.request.get(this.getPath())}async update(t){return this.request.patch(this.getPath(),{},t)}async resetSecret(){return this.request.patch(`${this.getPath()}/secret`,{},{})}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.get()`),t.push(`${this.getSdkPath()}.update(properties: IApiKey)`),t.push(`${this.getSdkPath()}.resetSecret()`)}}var I,w,b,f,q,$,C,A,N,v;!function(t){t.ACTIVE="ACTIVE",t.SUSPENDED="SUSPENDED"}(I||(I={})),function(t){t.OWNER="OWNER",t.ADMINISTRATOR="ADMINISTRATOR",t.BILLING_CONTACT="BILLING_CONTACT",t.MEMBER="MEMBER",t.API_KEY="API-KEY",t.INVITATION_DECLINED="INVITATION_DECLINED"}(w||(w={})),function(t){t.ACCEPTED="ACCEPTED",t.PENDING="PENDING",t.EXPIRED="EXPIRED"}(b||(b={})),function(t){t.ACTIVE="ACTIVE",t.SUSPENDED="SUSPENDED"}(f||(f={})),function(t){t.OWNER="OWNER",t.ADMINISTRATOR="ADMINISTRATOR",t.BILLING_CONTACT="BILLING_CONTACT",t.MEMBER="MEMBER",t.API_KEY="API_KEY"}(q||(q={})),function(t){t.L="L",t.M="M",t.Q="Q",t.H="H"}($||($={})),function(t){t.STATIC_REDIRECT="STATIC_REDIRECT",t.DYNAMIC_REDIRECT="DYNAMIC_REDIRECT",t.DYNAMIC_REDIRECT_TO_APP="DYNAMIC_REDIRECT_TO_APP"}(C||(C={})),function(t){t.SHORT_URL="SHORT_URL",t.HASHED_ID="HASHED_ID",t.SECURE_ID="SECURE_ID"}(A||(A={})),function(t){t.ACTIVE="ACTIVE",t.SUSPENDED="SUSPENDED"}(N||(N={})),function(t){t.PNG="png",t.SVG="svg"}(v||(v={}));class U extends g{constructor(t){super(t.getSession(),t.getPath(),t.getSdkPath(),"contacts")}async create(t){return this.request.post(this.getPath(),{},t)}async get(t){return this.request.getList(this.getPath(),t)}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.create(contact: IContact): Promise<any>`),t.push(`${this.getSdkPath()}.get(queryParemeters: IGetContactsQueryStringParameters): Promise<IGetContactsResponseBody>`)}}class T extends g{constructor(t,e){super(t.getSession(),t.getPath(),t.getSdkPath(),"contacts",e)}async link(t){return this.request.post(this.getPath(),{},{type:t})}async unlink(){return this.request.delete(this.getPath(),{},{})}async get(){return this.request.get(this.getPath())}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.link(type: string)`),t.push(`${this.getSdkPath()}.unlink()`),t.push(`${this.getSdkPath()}.get(): any`)}}class O extends g{constructor(t){super(t.getSession(),t.getPath(),t.getSdkPath(),"scans")}async get(t){return this.request.getList(this.getPath(),t)}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.get()`)}}class R extends g{constructor(t){super(t.getSession(),t.getPath(),t.getSdkPath(),"qrcodes")}async create(t){return t.locatorKeyType||(t.locatorKeyType=A.SHORT_URL),this.request.post(this.getPath(),{},t)}async get(t){return this.request.get(this.getPath(),t)}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.create()`),t.push(`${this.getSdkPath()}.get()`)}}class D extends g{constructor(t,e,s,r){super(t,e,s,"assets",r)}async get(){return this.request.get(this.getPath())}async update(t){return this.request.patch(this.getPath(),{},t)}async delete(){return this.request.delete(this.getPath())}contacts(){return new U(this)}contact(t){return new T(this,t)}scans(){return new O(this)}qrCodes(){return new R(this)}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.get()`),t.push(`${this.getSdkPath()}.update(properties: IAsset)`),t.push(`${this.getSdkPath()}.delete()`),this.contacts().describeSdkEndpoints(t),this.contact("{contactId}").describeSdkEndpoints(t),this.scans().describeSdkEndpoints(t),this.qrCodes().describeSdkEndpoints(t)}}class x extends g{constructor(t,e,s,r){super(t,e,s,"contacts",r)}async get(){return this.request.get(this.getPath())}async update(t){return this.request.patch(this.getPath(),{},t)}async delete(){return this.request.delete(this.getPath())}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.get()`),t.push(`${this.getSdkPath()}.update(properties: IContact)`),t.push(`${this.getSdkPath()}.delete()`)}}class _ extends g{constructor(t,e,s,r){super(t,e,s,"invitations",r)}async get(){return this.request.get(this.getPath())}async delete(){return this.request.delete(this.getPath())}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.get()`),t.push(`${this.getSdkPath()}.delete()`)}}class L extends g{constructor(t){super(t.getSession(),t.getPath(),t.getSdkPath(),"assets")}async create(t){return this.request.post(this.getPath(),{},t)}async get(){return this.request.getList(this.getPath())}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.create()`),t.push(`${this.getSdkPath()}.get()`)}}class B extends g{constructor(t){super(t.getSession(),t.getPath(),t.getSdkPath(),"assets")}async create(t){return this.request.postBatch(`${this.getPath()}/batch`,{},{assets:t})}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.create() /* batch */`)}}class j extends g{constructor(t){super(t.getSession(),t.getPath(),t.getSdkPath(),"contacts")}async create(t){return this.request.post(this.getPath(),{},t)}async get(){return this.request.getList(this.getPath())}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.create()`),t.push(`${this.getSdkPath()}.get()`)}}class G extends g{constructor(t){super(t.getSession(),t.getPath(),t.getSdkPath(),"contacts")}async create(t){return this.request.postBatch(`${this.getPath()}/batch`,{},{contacts:t})}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.create() /* batch */`)}}class z extends g{constructor(t){super(t.getSession(),t.getPath(),t.getSdkPath(),"users")}async get(){return this.request.getList(this.getPath())}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.get()`)}}class M extends g{constructor(t,e){super(t.getSession(),t.getPath(),t.getSdkPath(),"users",e)}async delete(){return this.request.delete(this.getPath())}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.delete()`)}}class F extends g{constructor(t){super(t.getSession(),t.getPath(),t.getSdkPath(),"qrcodes")}async create(t){return t.locatorKeyType||(t.locatorKeyType=A.SHORT_URL),this.request.post(this.getPath(),{},t)}async get(t){return this.request.get(this.getPath(),t)}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.create()`)}}class K extends g{constructor(t,e,s,r){super(t,e,s,"projects",r)}async get(){return this.request.get(this.getPath())}async update(t){return this.request.patch(this.getPath(),{},t)}async delete(){return this.request.delete(this.getPath())}assets(){return new L(this)}assetsBatch(){return new B(this)}contacts(){return new j(this)}contactsBatch(){return new G(this)}users(){return new z(this)}user(t){return new M(this,t)}qrCodes(){return new F(this)}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.get()`),t.push(`${this.getSdkPath()}.update(properties: IProject)`),t.push(`${this.getSdkPath()}.delete()`),this.assets().describeSdkEndpoints(t),this.assetsBatch().describeSdkEndpoints(t),this.contacts().describeSdkEndpoints(t),this.contactsBatch().describeSdkEndpoints(t),this.users().describeSdkEndpoints(t),this.user("{userId}").describeSdkEndpoints(t),this.qrCodes().describeSdkEndpoints(t)}}class V extends g{constructor(t,e){super(t.getSession(),t.getPath(),t.getSdkPath(),"contacts",e)}async update(t){return this.request.patch(this.getPath(),{},t)}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.update(contact: IContact)`)}}class H extends g{constructor(t){super(t.getSession(),t.getPath(),t.getSdkPath(),"contacts")}async create(t){return this.request.post(this.getPath(),{},t)}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.create(contact: IContact)`)}}class J extends g{constructor(t){super(t.getSession(),t.getPath(),t.getSdkPath(),"sms")}async create(t){return this.request.post(this.getPath(),{},t)}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.create()`)}}class Y extends g{constructor(t,e,s,r){super(t,e,s,"scans",r)}async get(){return this.request.get(this.getPath())}contacts(){return new H(this)}contact(t){return new V(this,t)}smss(){return new J(this)}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.get()`),this.contacts().describeSdkEndpoints(t),this.contact("{contactId}").describeSdkEndpoints(t),this.smss().describeSdkEndpoints(t)}}class Q extends g{constructor(t,e,s,r){super(t,e,s,"qrcodes",r)}async get(t){return this.request.get(this.getPath(),t)}async update(t){return this.request.patch(this.getPath(),{},t)}async delete(){return this.request.delete(this.getPath())}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.get()`),t.push(`${this.getSdkPath()}.update(properties: IQrCode)`),t.push(`${this.getSdkPath()}.delete()`)}}class W extends g{constructor(t){super(t.getSession(),t.getPath(),t.getSdkPath(),"accounts")}async create(t){return this.request.post(this.getPath(),{},t)}async get(){return this.request.getList(this.getPath())}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.create(properties: IAccount)`),t.push(`${this.getSdkPath()}.get()`)}}class X extends g{constructor(t,e,s,r){super(t,e,s,"users",r)}async get(){return this.request.get(this.getPath())}async update(t){return this.request.patch(this.getPath(),{},t)}async delete(){return this.request.delete(this.getPath())}accounts(){return new W(this)}describeSdkEndpoints(t){t.push(`${this.getSdkPath()}.get()`),t.push(`${this.getSdkPath()}.update(properties: IUser)`),t.push(`${this.getSdkPath()}.delete()`),this.accounts().describeSdkEndpoints(t)}}class Z{constructor(){this._config=void 0,this.cloudConfigName=void 0,this.cloudConfig=void 0,this.userPool=void 0,this.userId=void 0,this.isAdministrator=void 0,this.activeUser=void 0,this.requestFactory={}}getRequest(t){return this.requestFactory[t]()}static get client(){return Z.commonClient||(Z.commonClient=new Z),Z.commonClient}config(t){if(this._config)throw Error("Openscreen client is already configured");if(!t.key)throw Error("Openscreen invalid config, API key is missing");if(!t.secret)throw Error("Openscreen invalid config, secret is missing");return"string"==typeof t.environment?this.cloudConfigName=t.environment:"object"==typeof t.environment?this.cloudConfig=Promise.resolve(t.environment):this.cloudConfigName="api-production",this._config=t,this.requestFactory.accounts=()=>new d(this),this.requestFactory.apikeys=()=>new d(this),this.requestFactory.assets=()=>new d(this),this.requestFactory.assetsBatch=()=>new d(this),this.requestFactory.contacts=()=>new d(this),this.requestFactory.contactsBatch=()=>new d(this),this.requestFactory.invitations=()=>new d(this),this.requestFactory.projects=()=>new d(this),this.requestFactory.qrcodes=()=>new d(this),this.requestFactory.scans=()=>new d(this),this.requestFactory.sms=()=>new d(this),this.requestFactory.users=()=>new d(this),this}getConfig(){if(!this._config)throw Error("Openscreen client must be configured before accessing resources");return this._config}async authorize(){const t=this.getConfig(),s=await this.getCloudConfig();this.userPool=new c(s.poolId,s.clientId,t.storage);let r=this.userPool.getUser(t.key);r?process.env.OS_DEBUG&&console.info("Openscreen authorized user retrieved from cache"):r=await this.userPool.authenticate(t.key,t.secret),delete t.key,delete t.secret;const n=(await r.getSession()).getIdToken(),i=n.payload;this.userId=i.sub;const a=i["cognito:groups"];return this.isAdministrator=a&&a.includes("appadmin"),i.email?process.env.OS_DEBUG&&console.info(`Openscreen authorized as '${i.email}' (userId: ${i.sub}), session expires ${e(1e3*n.getExpiration()).fromNow()}, authorized ${e(1e3*n.getIssuedAt()).fromNow()}`):process.env.OS_DEBUG&&console.info(`Openscreen authorized as userId: ${i.sub}, session expires ${e(1e3*n.getExpiration()).fromNow()}, authorized ${e(1e3*n.getIssuedAt()).fromNow()}`),r}async getCloudConfig(){if(!this.cloudConfig){if(!this.cloudConfigName)throw Error("Openscreen environment config missing");this.cloudConfig=async function(t){return a.create({baseURL:"https://config.openscreen.com",timeout:1e4,responseType:"json",maxContentLength:5e4,maxBodyLength:5e4,maxRedirects:1,decompress:!0}).get(`${t}.json`).then(t=>t.data).catch(e=>{throw new Error(`Unable to load configuration '${t}': ${e.message}`)})}(this.cloudConfigName)}return this.cloudConfig}async getActiveUser(){return this.activeUser||(this.activeUser=this.authorize()),this.activeUser}async authorizedUserId(){return await this.getActiveUser(),this.userId||""}async amIAdministrator(){return await this.getActiveUser(),!0===this.isAdministrator}account(t){return new y(this,"","os",t)}apiKey(t){return new m(this,"","os",t)}asset(t){return new D(this,"","os",t)}contact(t){return new x(this,"","os",t)}invitation(t){return new _(this,"","os",t)}project(t){return new K(this,"","os",t)}scan(t){return new Y(this,"","os",t)}qrCode(t){return new Q(this,"","os",t)}user(t){return new X(this,"","os",t)}describeSdkEndpoints(){const t=[];return this.account("{accountId}").describeSdkEndpoints(t),this.apiKey("{apiKeyId}").describeSdkEndpoints(t),this.asset("{assetId}").describeSdkEndpoints(t),this.contact("{contactid}").describeSdkEndpoints(t),this.invitation("{invitationId}").describeSdkEndpoints(t),this.project("{projectId}").describeSdkEndpoints(t),this.scan("{scanId}").describeSdkEndpoints(t),this.qrCode("{qrCodeId}").describeSdkEndpoints(t),this.user("{userId}").describeSdkEndpoints(t),t.sort()}async saveQrImageDataToFile(e,s){var r,n,i;if(null==(r=e.image)||!r.data)throw new Error(`No image data present for QR code, qrCodeId='${e.qrCodeId||""}'`);let a;a=null!=(n=e.image)&&null!=(i=n.options)&&i.dataUrl?Buffer.from(e.image.data.replace(/^data:image\/\w+;base64,/,""),"base64").toString("binary"):Buffer.from(e.image.data,"base64").toString("binary"),await t.writeFile(s,a,"binary")}}Z.commonClient=void 0;export{I as AccountStatus,Z as Openscreen,b as ProjectInvitationStatus,f as ProjectStatus,$ as QrCodeErrorCorrectionLevel,C as QrCodeIntentType,A as QrCodeLocatorKeyType,N as QrCodeStatus,v as QrCodeType};
//# sourceMappingURL=index.esm.mjs.map
